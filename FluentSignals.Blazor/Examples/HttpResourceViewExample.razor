@page "/http-resource-example"
@using FluentSignals.Blazor.Components

<h3>HttpResourceView Example</h3>

<HttpResourceView T="WeatherForecast[]" 
                  Url="https://api.example.com/weatherforecast"
                  BaseUrl="https://api.example.com"
                  LoadOnInit="true">
    <Loading>
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading weather data...</span>
        </div>
    </Loading>
    
    <Success Context="forecasts">
        <table class="table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Temp. (C)</th>
                    <th>Temp. (F)</th>
                    <th>Summary</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var forecast in forecasts)
                {
                    <tr>
                        <td>@forecast.Date.ToShortDateString()</td>
                        <td>@forecast.TemperatureC</td>
                        <td>@forecast.TemperatureF</td>
                        <td>@forecast.Summary</td>
                    </tr>
                }
            </tbody>
        </table>
    </Success>
    
    <Empty>
        <div class="alert alert-info">
            No weather data available.
        </div>
    </Empty>
    
    <NotFound>
        <div class="alert alert-warning">
            <h4>Weather data not found</h4>
            <p>The weather forecast endpoint could not be found.</p>
        </div>
    </NotFound>
    
    <ServiceUnavailable>
        <div class="alert alert-danger">
            <h4>Service Unavailable</h4>
            <p>The weather service is currently unavailable. Please try again later.</p>
        </div>
    </ServiceUnavailable>
</HttpResourceView>

@code {
    public class WeatherForecast
    {
        public DateTime Date { get; set; }
        public int TemperatureC { get; set; }
        public int TemperatureF => 32 + (int)(TemperatureC / 0.5556);
        public string? Summary { get; set; }
    }
}