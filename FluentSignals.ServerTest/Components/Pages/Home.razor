@page "/"
@rendermode InteractiveServer
@using FluentSignals.Implementations.Core
@using FluentSignals.ServerTest.Components

<PageTitle>FluentSignals - Reactive State Management for .NET</PageTitle>

<div class="home-page">
<div class="hero-section">
    <div class="hero-content">
        <h1 class="hero-title">
            <span class="logo-large">⚡</span>
            FluentSignals
        </h1>
        <p class="hero-subtitle">
            Elegant reactive state management for .NET applications
        </p>
        <div class="hero-features">
            <div class="feature">✨ Simple & Intuitive API</div>
            <div class="feature">🚀 High Performance</div>
            <div class="feature">🔄 Reactive Updates</div>
            <div class="feature">🌐 Framework Agnostic</div>
        </div>
        <div class="hero-actions">
            <a href="/demos/signal" class="btn btn-primary btn-large">
                Explore Demos
            </a>
            <a href="/playground" class="btn btn-secondary btn-large">
                Try Playground
            </a>
        </div>
    </div>
</div>

<div class="content-section">
    <div class="section-header">
        <h2>Why FluentSignals?</h2>
        <p>Build reactive applications with confidence</p>
    </div>
    
    <div class="features-grid">
        <div class="feature-card">
            <div class="feature-icon">📡</div>
            <h3>Reactive Signals</h3>
            <p>Automatically propagate state changes throughout your application with minimal boilerplate.</p>
            <CodeBlock Code="@signalExample" Language="csharp" />
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">⚡</div>
            <h3>Async Support</h3>
            <p>Handle asynchronous operations with built-in loading and error states.</p>
            <CodeBlock Code="@asyncExample" Language="csharp" />
        </div>
        
        <div class="feature-card">
            <div class="feature-icon">🌐</div>
            <h3>HTTP Resources</h3>
            <p>Declarative HTTP operations with automatic state management and error handling.</p>
            <CodeBlock Code="@httpExample" Language="csharp" />
        </div>
    </div>
</div>

<div class="showcase-section">
    <div class="section-header">
        <h2>Live Example</h2>
        <p>See FluentSignals in action</p>
    </div>
    
    <div class="live-demo">
        <div class="demo-controls">
            <h4>Counter with Computed Values</h4>
            <div class="counter-display">
                <div class="counter-value">@counter.Value</div>
                <div class="computed-values">
                    <span>Doubled: @doubled.Value</span>
                    <span>Squared: @squared.Value</span>
                    <span>Is Even: @isEven.Value</span>
                </div>
            </div>
            <div class="counter-actions">
                <button class="btn btn-primary" @onclick="() => counter.Value++">Increment</button>
                <button class="btn btn-secondary" @onclick="() => counter.Value--">Decrement</button>
                <button class="btn btn-outline" @onclick="() => counter.Value = 0">Reset</button>
            </div>
        </div>
        
        <div class="demo-code">
            <CodeBlock Code="@liveExampleCode" Language="csharp" Title="Live Code" />
        </div>
    </div>
</div>

<div class="getting-started-section">
    <div class="section-header">
        <h2>Get Started</h2>
        <p>Add FluentSignals to your project in seconds</p>
    </div>
    
    <div class="install-steps">
        <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">
                <h4>Install the package</h4>
                <CodeBlock Code="dotnet add package FluentSignals" Language="bash" />
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">
                <h4>Create your first signal</h4>
                <CodeBlock Code="@gettingStartedCode" Language="csharp" />
            </div>
        </div>
        
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">
                <h4>Start building reactive apps!</h4>
                <a href="/demos/signal" class="btn btn-primary">View More Examples</a>
            </div>
        </div>
    </div>
</div>

@code {
    private TypedSignal<int> counter = new(0);
    private TypedSignal<int> doubled = new(0);
    private TypedSignal<int> squared = new(0);
    private TypedSignal<bool> isEven = new(true);

    protected override void OnInitialized()
    {
        base.OnInitialized();
        
        // Setup computed values
        counter.Subscribe(value =>
        {
            doubled.Value = value * 2;
            squared.Value = value * value;
            isEven.Value = value % 2 == 0;
            InvokeAsync(StateHasChanged);
        });
    }

    private string signalExample = @"// Create a reactive signal
var count = new TypedSignal<int>(0);

// Subscribe to changes
count.Subscribe(value => 
    Console.WriteLine($""Count: {value}""));

// Update triggers notifications
count.Value = 10; // Output: Count: 10";

    private string asyncExample = @"// Create async signal
var data = new AsyncTypedSignal<User>(null);

// Load data with automatic state management
await data.LoadAsync(async () => 
{
    return await userService.GetUserAsync();
});

// Check states
if (data.IsLoading.Value) // Show spinner
if (data.Error.Value != null) // Show error
if (data.Value != null) // Show data";

    private string httpExample = @"// Declarative HTTP in Blazor
<HttpResourceView T=""WeatherData[]"" 
                  Url=""/api/weather"">
    <Loading>
        <Spinner />
    </Loading>
    <Success Context=""data"">
        @foreach (var item in data) { }
    </Success>
    <NotFound>
        <p>Weather data not found</p>
    </NotFound>
</HttpResourceView>";

    private string liveExampleCode = @"// Reactive counter with computed values
var counter = new TypedSignal<int>(0);
var doubled = new TypedSignal<int>(0);
var squared = new TypedSignal<int>(0);
var isEven = new TypedSignal<bool>(true);

// Setup reactive computations
counter.Subscribe(value =>
{
    doubled.Value = value * 2;
    squared.Value = value * value;
    isEven.Value = value % 2 == 0;
});

// Update counter
counter.Value++; // All computed values update automatically";

    private string gettingStartedCode = @"using FluentSignals.Implementations.Core;

// Create signals
var name = new TypedSignal<string>(""World"");
var greeting = new TypedSignal<string>("""");

// Setup reactive binding
name.Subscribe(n => {
    greeting.Value = $""Hello, {n}!"";
});

// Change name updates greeting automatically
name.Value = ""FluentSignals""; 
// greeting.Value is now ""Hello, FluentSignals!""";
}

<style>
    .hero-section {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 6rem 2rem;
        text-align: center;
        position: relative;
        overflow: hidden;
        border-radius: 20px;
        margin: 1rem;
    }

    .hero-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
    }

    .hero-content {
        position: relative;
        z-index: 1;
        max-width: 800px;
        margin: 0 auto;
    }

    .hero-title {
        font-size: 4rem;
        font-weight: 800;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 1rem;
    }

    .logo-large {
        font-size: 5rem;
        animation: pulse 2s infinite;
    }

    @@keyframes pulse {
        0%, 100% { transform: scale(1); }
        50% { transform: scale(1.1); }
    }

    .hero-subtitle {
        font-size: 1.5rem;
        margin-bottom: 3rem;
        opacity: 0.9;
    }

    .hero-features {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        justify-content: center;
        margin-bottom: 3rem;
    }

    .feature {
        background: rgba(255, 255, 255, 0.2);
        padding: 0.75rem 1.5rem;
        border-radius: 50px;
        backdrop-filter: blur(10px);
    }

    .hero-actions {
        display: flex;
        gap: 1rem;
        justify-content: center;
    }

    .btn {
        padding: 0.75rem 1.5rem;
        border: none;
        border-radius: 8px;
        font-weight: 600;
        text-decoration: none;
        display: inline-block;
        cursor: pointer;
        transition: all 0.2s;
    }

    .btn-large {
        padding: 1rem 2rem;
        font-size: 1.125rem;
    }

    .btn-primary {
        background: white;
        color: #667eea;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
    }

    .btn-secondary {
        background: transparent;
        color: white;
        border: 2px solid white;
    }

    .btn-secondary:hover {
        background: white;
        color: #667eea;
    }

    .btn-outline {
        background: transparent;
        border: 2px solid #e5e7eb;
        color: #64748b;
    }

    .content-section, .showcase-section, .getting-started-section {
        padding: 4rem 2rem;
        max-width: 1200px;
        margin: 0 auto;
    }

    .section-header {
        text-align: center;
        margin-bottom: 3rem;
    }

    .section-header h2 {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 0.5rem;
        color: #1e293b;
    }

    .section-header p {
        font-size: 1.25rem;
        color: #64748b;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 2rem;
    }

    .feature-card {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        border: 1px solid #e5e7eb;
    }

    .feature-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
    }

    .feature-card h3 {
        margin-bottom: 1rem;
        color: #1e293b;
    }

    .feature-card p {
        color: #64748b;
        margin-bottom: 1.5rem;
    }

    .showcase-section {
        background: #f8fafc;
    }

    .live-demo {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 2rem;
        align-items: start;
    }

    @@media (max-width: 768px) {
        .live-demo {
            grid-template-columns: 1fr;
        }
    }

    .demo-controls {
        background: white;
        padding: 2rem;
        border-radius: 12px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
    }

    .counter-display {
        text-align: center;
        margin-bottom: 2rem;
    }

    .counter-value {
        font-size: 4rem;
        font-weight: 700;
        color: #667eea;
        margin-bottom: 1rem;
    }

    .computed-values {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .computed-values span {
        background: #f3f4f6;
        padding: 0.5rem 1rem;
        border-radius: 6px;
        font-size: 0.875rem;
    }

    .counter-actions {
        display: flex;
        gap: 0.75rem;
        justify-content: center;
    }

    .install-steps {
        display: flex;
        flex-direction: column;
        gap: 2rem;
        max-width: 800px;
        margin: 0 auto;
    }

    .step {
        display: flex;
        gap: 2rem;
        align-items: start;
    }

    .step-number {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        flex-shrink: 0;
    }

    .step-content {
        flex: 1;
    }

    .step-content h4 {
        margin-bottom: 1rem;
        color: #1e293b;
    }
}</style>
</div>
